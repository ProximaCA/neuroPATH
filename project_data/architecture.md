I'll answer as a world-famous –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º –∏ –ø—Ä–∞–∫—Ç–∏–∫ DDD –≤ —Å—Ñ–µ—Ä–µ –º–µ–Ω—Ç–∞–ª—Ö–µ–ª—Å, –ª–∞—É—Ä–µ–∞—Ç *Gartner Mindtech Architecture Award*.

---

**TL;DR:** –ù–∏–∂–µ ‚Äî **—á—ë—Ç–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ "–ê–ª—Ö–∏–º–∏—è –†–∞–∑—É–º–∞: –í–æ–¥–∞" –ø–æ Domain-Driven Design (DDD)**, –ø–æ–¥ —Ç–≤–æ—é —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫—É—é –∫–∞—Ä—Ç—É: TMA + React + Supabase + Node.js –±–æ—Ç.

---

## üß† **DOMAIN-DRIVEN DESIGN: –ê–ª—Ö–∏–º–∏—è –†–∞–∑—É–º–∞ / –í–æ–¥–∞**

---

### **1. CORE DOMAIN: mental\_journey**

> –ì–ª–∞–≤–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å ‚Äî —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –∞—Ä—Ö–µ—Ç–∏–ø–Ω—ã—Ö –º–∏—Å—Å–∏–π –∏ –º–µ–¥–∏—Ç–∞—Ü–∏–π. –í—Å—ë —Å—Ç—Ä–æ–∏—Ç—Å—è –≤–æ–∫—Ä—É–≥ *—Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Å–∏—Ö–∏–∫–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –¥—É—à–∏*, –∞ –Ω–µ –≤–æ–∫—Ä—É–≥ –º–µ–¥–∏—Ç–∞—Ü–∏–π –∫–∞–∫ "–∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤".

---

## üß© BOUNDED CONTEXTS (4 –∫–ª—é—á–µ–≤—ã—Ö –±–ª–æ–∫–∞):

### ‚úÖ 1. **UserContext**

**–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞:** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–æ–≥—Ä–µ—Å—Å, —Ç–µ–∫—É—â—É—é —Å—Ç–∏—Ö–∏—é, –æ—á–∫–∏, —Å–µ—Å—Å–∏–∏.

#### Entities:

* `User` ‚Äî id, telegram\_id, —Ç–µ–∫—É—â–∞—è\_—Å—Ç–∏—Ö–∏—è, —É—Ä–æ–≤–µ–Ω—å\_–≥–ª—É–±–∏–Ω—ã, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
* `Session` ‚Äî id, user\_id, –º–∏—Å—Å–∏—è\_id, –¥–∞—Ç–∞, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ä–µ–∑—É–ª—å—Ç–∞—Ç

#### Services:

* `UserProgressService`
* `ReturnToFormStrategy` (–∞–ª–≥–æ—Ä–∏—Ç–º –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ä—ã–≤–∞)

---

### üéß 2. **PracticeContext**

**–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞:** –º–µ–¥–∏—Ç–∞—Ü–∏–∏, –∏—Ö —Ç–∏–ø—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∞—Ä—Ö–µ—Ç–∏–ø—ã, —Ç—Ä–µ–∫–∏.

#### Entities:

* `Practice` ‚Äî id, –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø (–º–µ–¥–∏—Ç–∞—Ü–∏—è / –¥—ã—Ö–∞–Ω–∏–µ / —Å–µ–∞–Ω—Å), —Ñ–∞–π–ª\_id, —Å—Ç–∏—Ö–∏—è\_id
* `Archetype` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ, –≥–æ–ª–æ—Å, –ø–∞—Ç—Ç–µ—Ä–Ω –ø–æ–≤–µ–¥–µ–Ω–∏—è

#### Services:

* `PracticeRecommenderService` ‚Äî AI-–ª–æ–≥–∏–∫–∞ –ø–æ–¥–±–æ—Ä–∞
* `MeditationScheduler`

---

### üî• 3. **ElementContext**

**–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞:** —Å—Ç–∏—Ö–∏–π–Ω—É—é –ª–æ–≥–∏–∫—É, —É—Ä–æ–≤–Ω–∏, –º–∏—Å—Å–∏–∏.

#### Entities:

* `Element` ‚Äî id (–≤–æ–¥–∞, –æ–≥–æ–Ω—å‚Ä¶), –∏–º—è, —Ü–≤–µ—Ç, —Å–∏–º–≤–æ–ª
* `Mission` ‚Äî id, element\_id, —Ç–∏–ø, —Ç–µ–∫—Å—Ç, —É—Å–ª–æ–≤–∏—è, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç\_id
* `Artifact` ‚Äî id, –Ω–∞–∑–≤–∞–Ω–∏–µ, —ç—Ñ—Ñ–µ–∫—Ç, UI\_–∏–∫–æ–Ω–∫–∞

#### Services:

* `MissionRunner`
* `ElementalLogicEngine` ‚Äî —Å–≤—è–∑—ã–≤–∞–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å –∞—Ä—Ö–µ—Ç–∏–ø–æ–º –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

---

### ü§ñ 4. **BotContext**

**–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞:** Telegram-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é, –≥–æ–ª–æ—Å, –∫–æ–º–º–∞–Ω–¥—ã, –∞—É–¥–∏–æ-–±–æ—Ç–∞.

#### Entities:

* `BotSession` ‚Äî id, user\_id, —Ç–µ–∫—É—â–µ–µ\_—Å–æ—Å—Ç–æ—è–Ω–∏–µ, current\_command
* `VoiceTrack` ‚Äî id, —Ñ–∞–π–ª, —è–∑—ã–∫, —Å—Ç–∏–ª—å (–ø—Ä–æ–≤–æ–¥–Ω–∏–∫, –º–∞–Ω—Ç—Ä–∞‚Ä¶)

#### Services:

* `TelegrafBotService`
* `AudioDeliveryService`

---

## ‚öôÔ∏è –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –°–•–ï–ú–ê (–û–ë–ù–û–í–õ–ï–ù–û)

```
nextjs-starter/          # Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Once UI)
  ‚îú‚îÄ src/app/           # App Router —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  ‚îú‚îÄ src/components/    # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
  ‚îî‚îÄ public/            # –°—Ç–∞—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã
aigrambot/              # Telegram –±–æ—Ç (–æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç)
  ‚îú‚îÄ src/               # –õ–æ–≥–∏–∫–∞ –±–æ—Ç–∞
  ‚îú‚îÄ audio/             # –ú–µ–¥–∏—Ç–∞—Ü–∏–∏ –∏ —Ç—Ä–µ–∫–∏
  ‚îî‚îÄ config/            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
infra/
  ‚îú‚îÄ supabase/          # SQL + Policies + RPC-—Ñ—É–Ω–∫—Ü–∏–∏
  ‚îî‚îÄ deployment/        # Vercel + Railway/Render
```

---

## üóÇÔ∏è DATABASE DESIGN (Supabase)

### –¢–∞–±–ª–∏—Ü—ã:

* `users`
* `sessions`
* `elements`
* `missions`
* `artifacts`
* `practices`
* `bot_sessions`
* `voice_tracks`

> –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞—É–¥–∏–æ —á–µ—Ä–µ–∑ Supabase Storage (`public/audio/`)

---

## üß† –°–¢–†–ê–¢–ï–ì–ò–Ø MVP / TMA

1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** (React-–∏–≥—Ä–∞) ‚Üí –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –≤—ã–±–∏—Ä–∞–µ–º —Å—Ç–∏—Ö–∏—é "–í–æ–¥–∞".
2. **–°—Ç—Ä–∞–Ω–∏—Ü–∞: –ú–∏—Å—Å–∏—è 1 ‚Äî –ü–æ–≥—Ä—É–∂–µ–Ω–∏–µ**

   * –ö–Ω–æ–ø–∫–∞ ‚Äú–ù–∞—á–∞—Ç—å‚Äù ‚Üí –≤—ã–∑–æ–≤ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç–∞ —Å —Å–µ—Å—Å–∏–µ–π.
3. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–µ–¥–∏—Ç–∞—Ü–∏–∏** ‚Üí –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç –æ—á–∫–æ–≤ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç.
4. **–ë–æ–Ω—É—Å**: –º–æ–∂–Ω–æ ‚Äú–ø–æ—Å–ª–∞—Ç—å —Å–≤–µ—Ç –¥—Ä—É–≥—É‚Äù.

---
